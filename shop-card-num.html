<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>购物车</title>
		<meta name="Description" content="购物车" />
		<meta name="Keywords" content="购物车" />
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link rel="stylesheet" type="text/css" href="css/style.css" />
		<link rel="stylesheet" type="text/css" href="font/iconfont.css" />
		<link rel="stylesheet" type="text/css" href="css/card.css" />
		<script type="text/javascript">
			document.addEventListener('plusready', function() {
				//console.log("所有plus api都应该在此事件发生后调用，否则会出现plus is undefined。"
			});
		</script>
	</head>

	<body>
		<header>
			<div class="top clearfix">
				<div class="left back">
					<a href="index.html">
						<img src="img/disclosure arrow.png" />
					</a>
				</div>
				<div class='names'>购物车</div>
				<div class="right">
					<a href="login.html" class="person">
						<img src="img/登录.png" />
					</a>
					<a href="" class="share">
						<img src="img/分享.png" />
					</a>
				</div>
			</div>
		</header>
		<section>
			<div class="card-bar">
				<div class="title">您已选择的商品</div>
				<ul>
					<li class="shop-detail clearfix">
						<div class="check-box">
							<input type="checkbox" id="checkboxFourInput1" />
							<label for="checkboxFourInput1"></label>
						</div>
						<div class="card-img">
							<a href="">
								<img src="img/timg.png">
							</a>
						</div>
						<dl class="active">
							<dt>
							哇哈哈血橙橙汁饮品 450ml/瓶
						</dt>
							<dd class="price">
								¥<span>3</span>
							</dd>
							<dd class="count">
								<img src="img/关闭.png" />
								<span>2</span>
							</dd>
						</dl>
						<!--
                    	作者：offline
                    	时间：2017-06-16
                    	描述：右滑出现的
                    -->
						<div class="num-controls">
							<ul class="num-control">
								<li>+</li>
								<li>-</li>
							</ul>
							<div class="del">删除</div>
						</div>
					</li>
					<li class="shop-detail clearfix">
						<div class="check-box">
							<input type="checkbox" id="checkboxFourInput2" />
							<label for="checkboxFourInput2"></label>
						</div>
						<div class="card-img">
							<a href="">
								<img src="img/timg.png">
							</a>
						</div>
						<dl>
							<dt>
							哇哈哈血橙橙汁饮品 450ml/瓶
						</dt>
							<dd class="price">
								¥<span>3</span>
							</dd>
							<dd class="count">
								<img src="img/关闭.png" />
								<span>2</span>
							</dd>
						</dl>
						<!--
                    	作者：offline
                    	时间：2017-06-16
                    	描述：右滑出现的
                    -->
						<div class="num-controls">
							<ul class="num-control">
								<li>+</li>
								<li>-</li>
							</ul>
							<div class="del">删除</div>
						</div>
					</li>
					<li class="shop-detail clearfix">
						<div class="check-box">
							<input type="checkbox" id="checkboxFourInput3" />
							<label for="checkboxFourInput3"></label>
						</div>
						<div class="card-img">
							<a href="">
								<img src="img/timg.png">
							</a>
						</div>
						<dl>
							<dt>
							哇哈哈血橙橙汁饮品 450ml/瓶
						</dt>
							<dd class="price">
								¥<span>3</span>
							</dd>
							<dd class="count">
								<img src="img/关闭.png" />
								<span>2</span>
							</dd>
						</dl>
						<!--
                    	作者：offline
                    	时间：2017-06-16
                    	描述：右滑出现的
                    -->
						<div class="num-controls">
							<ul class="num-control">
								<li>+</li>
								<li>-</li>
							</ul>
							<div class="del">删除</div>
						</div>
					</li>
					<li class="shop-detail clearfix">
						<div class="check-box">
							<input type="checkbox" id="checkboxFourInput4" />
							<label for="checkboxFourInput4"></label>
						</div>
						<div class="card-img">
							<a href="">
								<img src="img/timg.png">
							</a>
						</div>
						<dl>
							<dt>
							哇哈哈血橙橙汁饮品 450ml/瓶
						</dt>
							<dd class="price">
								¥<span>3</span>
							</dd>
							<dd class="count">
								<img src="img/关闭.png" />
								<span>2</span>
							</dd>
						</dl>
						<!--
                    	作者：offline
                    	时间：2017-06-16
                    	描述：右滑出现的
                    -->
						<div class="num-controls">
							<ul class="num-control">
								<li>+</li>
								<li>-</li>
							</ul>
							<div class="del">删除</div>
						</div>
					</li>
					<li class="shop-detail clearfix">
						<div class="check-box">
							<input type="checkbox" id="checkboxFourInput5" />
							<label for="checkboxFourInput5"></label>
						</div>
						<div class="card-img">
							<a href="">
								<img src="img/timg.png">
							</a>
						</div>
						<dl>
							<dt>
							哇哈哈血橙橙汁饮品 450ml/瓶
						</dt>
							<dd class="price">
								¥<span>3</span>
							</dd>
							<dd class="count">
								<img src="img/关闭.png" />
								<span>2</span>
							</dd>
						</dl>
						<!--
                    	作者：offline
                    	时间：2017-06-16
                    	描述：右滑出现的
                    -->
						<div class="num-controls">
							<ul class="num-control">
								<li>+</li>
								<li>-</li>
							</ul>
							<div class="del">删除</div>
						</div>
					</li>
				</ul>
			</div>
			<div class="total clearfix">
				<div class="check-boxs">
					<input type="checkbox" id="checkboxFourInput6" />
					<label for="checkboxFourInput6" class="all">&nbsp;全选</label>
				</div>
				<div class="total-price">合计：<span>¥6</span></div>
				<div class="total-num">
					<a href="confirm-shop.html">结算(<span>2</span>)</a>
				</div>
			</div>
		</section>
		<footer>
			<ul class="clearfix">
				<li>
					<a href="index.html">
						<div class='icon-box'>
							<i class="iconfont icon-shouye_shouye"></i>
						</div>
						<p>首页</p>
					</a>
				</li>
				<li class="active">
					<a href="shop-card-num.html">
						<div class="icon-box">
							<i class="iconfont icon-ShoppingCart"></i>
						</div>
						<p>购物车</p>
					</a>
				</li>
				<li>
					<a href="person.html">
						<div class="icon-box">
							<i class="iconfont icon-gerenxinxi"></i>
						</div>
						<p>信息中心</p>
					</a>
				</li>
			</ul>

		</footer>
		<script src="js/jquery-3.1.0.js" type="text/javascript"></script>
		<!-- <script src="js/index.js" type="text/javascript"></script> -->
		<script>
			$(".total-num").find("span").html($(".card-bar").find("label.on").length);
			function total(){
				var str = 0;
				$(".card-bar").find("label.on").parents("li").each(function(i,v){
					if($(v).find(".price").html()){
						str += $(v).find(".price span").html()*$(v).find(".count span").html();
					}
				});
				// if($(".card-bar").find("label.on").parents("li").find(".price").html()){
				// 	str = $(".card-bar").find("label.on").parents("li").find(".price span").html()*$(".card-bar").find("label.on").parents("li").find(".count span").html();
				// }
				console.log(str);
				$(".total-price").find("span").html('￥'+str);
			};
			total();

			// $(".total .all").on("click",function(){
			// 	if($(this).siblings("input[type='checkbox']").is(':checked')){
			// 		$(".card-bar ul li").each(function(i,v){
			// 			$(v).find("input[type='checkbox']").removeAttr("checked");
			// 		});
			// 	}else{
			// 		$(".card-bar ul li").each(function(i,v){
			// 			$(v).find("input[type='checkbox']").attr("checked","true");
			// 		});
			// 	}
			// 	$(".total-num").find("span").html($(".card-bar").find("label.on").length);

			// });

			$(".check-box input").on("click",function(){
				$(this).attr("checked", true).siblings("label").toggleClass("on");
				$(".total-num").find("span").html($(".card-bar").find("label.on").length);
				total();
			})

				// 全选
				var flag = false;
				$(".total .all").click(function () {
					// console.log($(this).siblings("input[type='checkbox']").attr("checked"));

					// console.log(flag);

					if(!flag){
						$(".card-bar ul li").find("input[type='checkbox']").each(function () {
							$(this).attr("checked", true).siblings("label").addClass("on");
							// $(this).next().css({ "background-color": "#3366cc", "color": "#ffffff" });

						});
						flag = true;
						// GetCount();

					}else{
						$(".card-bar ul li").find("input[type='checkbox']").each(function () {
							// if ($(this).attr("checked")) {
								$(this).attr("checked", false).siblings("label").removeClass("on");
								//$(this).next().css({ "background-color": "#ffffff", "color": "#000000" });
							// } else {
								// $(this).attr("checked", true).siblings("label").addClass("on");
								//$(this).next().css({ "background-color": "#3366cc", "color": "#000000" });
							// }
						});
						flag = false;
						// GetCount();

			   		}
			   		$(".total-num").find("span").html($(".card-bar").find("label.on").length);
			   		total();

				});
		</script>
	</body>

</html>
